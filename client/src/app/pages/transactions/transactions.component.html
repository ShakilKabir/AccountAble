<!-- transactions.component.html -->

<div
    class="flex-grow p-8 bg-gray-100 overflow-y-auto"  [class.blur]="isAnyModalOpen">

    <!-- Top Bar -->
    <div class="flex justify-between mb-6">
        <button class="py-2 px-4 bg-blue-500 text-white rounded">Import transactions</button>
        <span class="font-bold text-xl">Transactions</span>
        <button class="py-2 px-4 bg-blue-500 text-white rounded">Connect your bank</button>
    </div>

    <!-- Transaction Total and Actions -->
    <div class="flex justify-between mb-6">
        <span class="font-semibold text-lg">All accounts: $15,006.50</span>
        <div>
            <button class="py-2 px-4 bg-green-500 text-white rounded mr-2" (click)="toggleIncomeModal()">Add income</button>
            <button class="py-2 px-4 bg-red-500 text-white rounded mr-2" (click)="toggleExpenseModal()">Add expense</button>
            <button class="py-2 px-4 bg-blue-500 text-white rounded" (click)="toggleJournalModal()">Add Journal Transaction</button>
            <!-- ... other buttons ... -->
        </div>
    </div>

    <!-- Transactions Table with a max height and scrollability -->
    <div class="overflow-auto max-h-[calc(100vh-20rem)]">
        <table class="min-w-full bg-white border border-gray-300">
            <thead>
                <tr class="bg-gray-200">
                    <th class="py-2 px-4 border-b">Date</th>
                    <th class="py-2 px-4 border-b">Description</th>
                    <th class="py-2 px-4 border-b">Debit</th>
                    <th class="py-2 px-4 border-b">Credit</th>
                    <th class="py-2 px-4 border-b">Amount</th>
                    <th class="py-2 px-4 border-b">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let transaction of transactions" class="text-center">
                    <td class="py-2 px-4 border-b">{{ transaction.date | date:'mediumDate'}}</td>
                    <td class="py-2 px-4 border-b">{{ transaction.description }}</td>
                    <td class="py-2 px-4 border-b">{{ transaction.debit_account_name }}</td>
                    <td class="py-2 px-4 border-b">{{ transaction.credit_account_name }}</td>
                    <td class="py-2 px-4 border-b">{{ transaction.amount }}</td>
                    <td
                        class="py-2 px-4 border-b"><!-- Action buttons/icons here -->
                        <button class="bg-red-500 text-white rounded px-2 py-1" (click)="deleteTransaction(transaction._id)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Modals remain the same ... -->
</div>
<app-transaction-form *ngIf="showIncomeModal" [show]="showIncomeModal" type="deposit" (close)="toggleIncomeModal()" (transactionAdded)="loadTransactions()"></app-transaction-form>

<app-transaction-form *ngIf="showExpenseModal" [show]="showExpenseModal" type="withdrawal" (close)="toggleExpenseModal()" (transactionAdded)="loadTransactions()"></app-transaction-form>

<app-transaction-form *ngIf="showJournalModal" [show]="showJournalModal" type="journal" (close)="toggleJournalModal()" (transactionAdded)="loadTransactions()"></app-transaction-form>
